1.How to get count of opportunities related with an account
  =[SELECT count(id), AccountId FROM Opportunity GROUP BY AccountId];
2.
